## 什么是嵌入式服务器?为什么要使用嵌入式服务器?
节省了下载安装tomcat，应用也不需要再打war包，然后放到webapp目录下再运行
只需要一个安装了 Java 的虚拟机，就可以直接在上面部署应用程序了
springboot已经内置了tomcat.jar，运行main方法时会去启动tomcat，并利用tomcat的spi机制加载springmvc


## Mybatis的优缺点

优点:
1. 基于 SQL语句编程，相当灵活，不会对应用程序或者数据库的现有设计造成任何影响，SQL写在 XML里，解除 sql 与程序代码的耦合，便于统一管理:提供XML标，支持编写动态 SQL语句，并可重用。
2. 与JDBC 相比，减少了 50%以上的代码量，消除了JDBC大量冗余的代码，不需要手动开关连接;
3. 很好的与各种数据库兼容(因为 MyBatis 使用JDBC来连接数据库，所以只要JDBC 支持的数据库 MyBatis 都支持)。
4. 能够与 Spring 很好的集成,
5. 提供映射标签，支持对象与数据库的 ORM 字段关系映射;提供对象关系映射标签，支持对象关系组件维护

缺点:
1. SQL语句的编写工作量较大，尤其当字段多、关联表多时，对开发人员编写SQL 语句的功底有一定要求。
2. SQL语句依赖于数据库，导致数据库移植性差，不能随意更换数据库。

## Mybatis和Hibernate的区别


1. **映射方式**：

- MyBatis是一个半自动映射的框架，需要手动匹配POJO（Plain Old Java Object，简单的Java对象）和SQL的映射关系。这意味着开发人员需要编写具体的SQL语句，并手动指定如何将数据库结果映射到Java对象。

- Hibernate则是一个全表映射的框架，它提供自动映射实体类和数据库表的功能，无需开发人员编写复杂的SQL语句。只需提供POJO和映射关系，Hibernate就能自动处理数据持久化过程。

2. **灵活性**：

- MyBatis提供了强大的动态SQL功能，允许在XML文件中编写包含条件判断、循环等逻辑的SQL语句。这使得根据不同条件构建不同的SQL语句成为可能，提高了SQL语句的灵活性。
- Hibernate虽然也提供了查询语言HQL（Hibernate Query Language），但它主要面向对象查询，不直接操作SQL。因此，在复杂SQL需求场景下，Hibernate的灵活性可能不如MyBatis。

3. **开发效率**：

- 由于Hibernate能够自动处理实体类和数据库表之间的映射关系，以及提供了简洁的API进行数据库操作，因此它可以提高开发效率，减少手动编码工作。
- MyBatis则需要开发人员手动编写SQL和映射关系，因此在某些情况下，开发效率可能稍逊于Hibernate。

4. **缓存机制**：

- Hibernate提供了完善的缓存机制，包括一级缓存和二级缓存，能够减少数据库的访问次数，提高系统性能。
- MyBatis的缓存机制相对简单，主要在命名空间中共享相同的缓存配置和实例。

5. **错误处理**：

- Hibernate对查询对象有着良好的管理机制，当使用二级缓存时，如果出现脏数据，系统会报错并提示。
- MyBatis则需要开发人员自行处理可能出现的SQL错误和异常。

6. **学习成本**：

- MyBatis的学习成本相对较低，它更加关注SQL的编写和映射关系的定义，对于熟悉SQL的开发者来说，上手较快。
- Hibernate的学习成本可能稍高，因为它涉及到更多的ORM（对象关系映射）概念和技术。



### #{}和${}的区别是什么?

```txt
#{}是预编译处理、是占位符， ${}是字符串替换、是拼接符。

Mybatis 在处理#{}时，会将 sql 中的#{}替换为?号，调用 Preparedstatement 来赋值;

Mybatis 在处理${}时，就是把${}替换成变量的值，调用 Statement 来赋值;

#{}的变量替换是在DBMS 中、变量替换后，#{}对应的变量自动加上单引号

${}的变量替换是在 DBMS 外、变量替换后，${}对应的变量不会加上单引号
使用#{}可以有效的防止 SQL 注入，提高系统安全性。
```


## 简述 Mybatis 的插件运行原理，如何编写一个插件


Mybatis 只支持针对 ParameterHandler、ResultSetHandler、StatementHandler、Executor 这4种接口的插件， Mybatis 使用JDK的动态代理，为需要拦截的接口生成代理对象以实现接口方法拦截功能，每当执行这4种接口对象的方法时，就会进入拦截方法，具体就是 InvocationHandler的invoke()方法，拦截那些你指定需要拦截的方法。

编写插件: 实现 Mybatis 的 Interceptor 接口并复写 intercept()方法，然后在给插件编写注解，指定要拦截哪个接口的哪些方法即可， 在配置文件中配置编写的插件。

![[Pasted image 20240430164754.png]]



## 索引的基本原理
索引用来快速地寻找那些具有特定值的记录。如果没有索引，一般来说执行查询时遍历整张表。索引的原理:就是把无序的数据变成有序的查询

1.把创建了索引的列的内容进行排序
2.对排序结果生成倒排表
3.在倒排表内容上拼上数据地址链
4.在查询的时候，先拿到倒排表内容，再取出数据地址链，从而拿到具体数据


## 聚簇索引和非聚簇索引的区别

 数据库表的索引从数据存储方式上可以分为聚簇索引和非聚簇索引两种。“聚簇”的意思是数据行被按照一定顺序一个个紧密地排列在一起存储。我们熟悉的InnoDB和MyISAM两大引擎，InnoDB的默认数据结构是聚簇索引，而MyISAM是非聚簇索引。

聚簇索引（Clustered Index）并不是一种单独的索引类型，而是一种数据存储方式。当表有了聚簇索引的时候，表的数据行都存放在索引树的叶子页中。无法把数据行放到两个不同的地方，所以一张表只允许有一个聚簇索引。InnoDB的聚簇索引实际上是将索引和数据保存中同一个B+Tree中。InnoDB通过主键聚集数据，如果没有定义主键，InnoDB会选择一个唯一的的非空索引代替。如果没有这样的索引，InnoDB会隐式定义一个主键来作为聚簇索引。

非聚簇索引（NoClustered Index），又叫二级索引。二级索引的叶子节点中保存的不是指向行的物理指针，而是行的主键值。当通过二级索引查找行，存储引擎需要在二级索引中找到相应的叶子节点，获得行的主键值，然后使用主键去聚簇索引中查找数据行，这需要两次B+Tree查找。


## MySQL索引的数据结构，各自优劣
索引的数据结构和具体存储引擎的实现有关，在MySQL中使用较多的索引有Hash索引，B+树索引等，InnoDB存储引擎的默认索引实现为:B+树索引。
对于哈希索引来说，底层的数据结构就是哈希表，因此在绝大多数需求为单条记录查询的时候，可以选择哈希索引，查询性能最快;其余大部分场景，建议选择B+Tree索引。


## 索引设计原则

![[Pasted image 20240430180147.png]]




